(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,n){e.exports=n(64)},38:function(e,t,n){},47:function(e,t,n){},51:function(e,t,n){},53:function(e,t,n){},55:function(e,t,n){},57:function(e,t,n){},60:function(e,t,n){},62:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(25),i=n.n(s),c=n(67),o=n(13),u=n(26),l=n(12),m=(n(38),n(5)),p=n(6),h=n(8),v=n(7),d=n(9),f=n(14),b=n.n(f),g=n(68),E=n(66),y=n(69),O=n(65),j=(n(47),function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"nav-bar"},r.a.createElement(O.a,{to:"/",style:{textDecoration:"none"}},r.a.createElement("p",{className:"home-button"},"Heim")))}}]),t}(a.Component)),w=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(b.a,{title:"S\xed\xf0a fannst ekki"}),r.a.createElement("p",null,"S\xed\xf0a fannst ekki"))}}]),t}(a.Component),k=n(2),N=n.n(k),x=n(10);function S(){return F.apply(this,arguments)}function F(){return(F=Object(x.a)(N.a.mark(function e(){var t,n,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=JSON.parse(window.localStorage.getItem("movies")))){e.next=6;break}if(n=t.timestamp,!(new Date-new Date(n)<72e5)){e.next=6;break}return a=t.movies,e.abrupt("return",a);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function M(e){return C.apply(this,arguments)}function C(){return(C=Object(x.a)(N.a.mark(function e(t){var n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n={movies:t,timestamp:new Date},console.log(n),window.localStorage.setItem("movies",JSON.stringify(n));case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var B="https://bio-serverinn.herokuapp.com";function D(){return(D=Object(x.a)(N.a.mark(function e(){var t,n,a,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{authorization:"Bearer Kappa"},method:"GET"},n="".concat(B),e.next=4,fetch(n,t);case 4:return a=e.sent,e.next=7,a.json();case 7:return r=e.sent,200===a.status&&M(r),e.abrupt("return",{result:r,status:a.status});case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function I(){return(I=Object(x.a)(N.a.mark(function e(t){var n,a,r,s,i,c,o;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=JSON.parse(window.localStorage.getItem("token"))||void 0)){e.next=14;break}if(a=n.timestamp,r=(new Date).getTime(),console.log(r,a),void 0!==n&&n.value&&!(r>a)){e.next=11;break}return e.next=8,T();case 8:n=e.sent,e.next=12;break;case 11:n=n.value;case 12:e.next=17;break;case 14:return e.next=16,T();case 16:n=e.sent;case 17:return s={headers:{"x-access-token":n,"Content-Type":"application/json"},method:"GET"},i="".concat(B,"/movies?imdbid=tt").concat(t),e.next=21,fetch(i,s);case 21:return c=e.sent,e.next=24,c.json();case 24:return o=e.sent,e.abrupt("return",{result:o,status:c.status});case 26:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function T(){return J.apply(this,arguments)}function J(){return(J=Object(x.a)(N.a.mark(function e(){var t,n,a,r,s,i,c;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.stringify({username:"snati",password:"helgigummi"}),n={body:t,headers:{"Content-Type":"application/json"},method:"POST"},a="".concat(B,"/authenticate"),e.next=5,fetch(a,n);case 5:return r=e.sent,e.next=8,r.json();case 8:return s=e.sent,200===r.status&&(i=s.token,864e5,c={value:i,timestamp:(new Date).getTime()+864e5},localStorage.setItem("token",JSON.stringify(c))),e.abrupt("return",{result:s,status:r.status});case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var _={getMovie:function(e){return I.apply(this,arguments)},getMovies:function(){return D.apply(this,arguments)}},R="MOVIES_REQUEST",U="MOVIES_ERROR",A="MOVIES_SUCCESS";function K(){return{type:R,isFetching:!0,movies:null}}function L(e){return{type:U,isFetching:!1,movies:null,message:e}}function P(e){return{type:A,isFetching:!1,movies:e}}var V=function(){return function(){var e=Object(x.a)(N.a.mark(function e(t){var n,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(K()),e.prev=1,e.next=4,_.getMovies();case 4:n=e.sent,e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",t(L(e.t0)));case 10:401===n.status?t(L(n.result)):(a=n.result,t(P(a)));case 11:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}()},G=(n(51),function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,a=e.onClick,s=e.pushed,i="button ".concat(n);return s&&(i+=" pushed"),r.a.createElement("button",{onClick:a,className:i},t)}}]),t}(a.Component));G.defaultProps={className:"",onClick:function(){}};var H=G,W=(n(53),function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.movie,t=e.title,n=e.poster,a=e.ratings,s=e.id;return r.a.createElement("figure",{className:"movieSpace"},r.a.createElement(O.a,{to:"/movie/"+s,style:{textDecoration:"none"}},r.a.createElement("img",{src:n,alt:"Mynd fyrir b\xed\xf3myndina "+t}),r.a.createElement("p",null,t),r.a.createElement("div",{className:"rating"},r.a.createElement("p",null,a.imdb),r.a.createElement("img",{className:"logo",src:"".concat("/biomyndir","/imdb.png"),alt:"imdb logo"}))))}}]),t}(a.Component)),z=(n(55),function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"bullseye"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"dash uno"}),r.a.createElement("div",{className:"dash dos"}),r.a.createElement("div",{className:"dash tres"}),r.a.createElement("div",{className:"dash cuatro"})))}}]),t}(a.Component)),Q=(n(57),function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={allMovies:[],movies:[],done:!1,cinemas:[{name:"\xc1lfabakki",pushed:!1},{name:"Borgarb\xed\xf3",pushed:!1},{name:"B\xed\xf3 Parad\xeds",pushed:!1},{name:"Samb\xed\xf3in Egilsh\xf6ll",pushed:!1},{name:"H\xe1sk\xf3lab\xed\xf3",pushed:!1},{name:"Kringlub\xed\xf3",pushed:!1},{name:"Laugar\xe1sb\xed\xf3",pushed:!1},{name:"Samb\xed\xf3in, Akureyri",pushed:!1},{name:"Samb\xed\xf3in, Keflav\xedk",pushed:!1},{name:"Sm\xe1rab\xed\xf3",pushed:!1}],sortMovies:!1},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(x.a)(N.a.mark(function e(){var t,n,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.dispatch,(n=JSON.parse(window.localStorage.getItem("cinemas")))&&this.setState({cinemas:n,sortMovies:!0}),e.next=5,S();case 5:if(!(a=e.sent)){e.next=10;break}this.setState({allMovies:a,movies:a,done:!0}),e.next=12;break;case 10:return e.next=12,t(V());case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){var n=this.props,a=n.isFetching,r=n.movies,s=n.message,i=this.state,c=i.done,o=i.sortMovies,u=i.cinemas;a||c?a?console.info("Fetching movies"):o&&this.sortMovies(u):r?this.setState({allMovies:r,movies:r,done:!0}):s&&console.warn(s)}},{key:"cinemaButton",value:function(e){var t=this.state.cinemas;t[e].pushed=!t[e].pushed,this.sortMovies(t)}},{key:"sortMovies",value:function(e){var t=this.state.allMovies,n=[];t.forEach(function(t){var a=!1;e.forEach(function(e){e.pushed||t.showtimes.filter(function(t){return t.cinema.name===e.name}).length>0&&(a=!0)}),a&&n.push(t)}),window.localStorage.setItem("cinemas",JSON.stringify(e)),this.setState({movies:n,cinemas:e,sortMovies:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.message,a=t.isFetching,s=this.state,i=s.cinemas,c=s.movies;return a?r.a.createElement(z,null):n?r.a.createElement("p",null,n):r.a.createElement("div",null,r.a.createElement("div",{className:"cinemas"},r.a.createElement("h3",null,"B\xed\xf3h\xfas"),i.map(function(t,n){return r.a.createElement(H,{key:n,pushed:t.pushed,onClick:function(){return e.cinemaButton(n)}},t.name)})),r.a.createElement("div",{className:"movies"},c&&c.map(function(e){return r.a.createElement(W,{key:e.id,movie:e})})))}}]),t}(a.Component)),Y=Object(y.a)(Object(l.b)(function(e){return{movies:e.movies.movies,isFetching:e.movies.isFetching}})(Q)),$=(n(60),function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={movies:null,done:!1},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(x.a)(N.a.mark(function e(){var t,n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:if(!(t=e.sent)){e.next=7;break}this.setState({movies:t,done:!0}),e.next=10;break;case 7:return n=this.props.dispatch,e.next=10,n(V());case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.isFetching,n=e.movies,a=e.message,r=this.state,s=r.done,i=r.sortMovies,c=r.cinemas;t||s?t?console.info("Fetching movies"):i&&this.sortMovies(c):n?this.setState({movies:n,done:!0}):console.warn(a)}},{key:"cinemaButton",value:function(e){var t=this.state.cinemas;t[e].pushed=!t[e].pushed,this.sortMovies(t)}},{key:"render",value:function(){var e=this.props,t=e.message,n=e.isFetching,a=this.state.movies;if(t)return r.a.createElement("p",null,t);if(n||!a)return r.a.createElement(z,null);var s=this.props.match.params.id,i=a.filter(function(e){return e.id===parseInt(s)}),c=i[0],o=c.title,u=c.poster,l=c.ratings,m=c.ids,p=c.plot,h=c.showtimes,v=c.directors_abridged,d=c.trailers,f=l.imdb,g=d[0].results,E="";g.forEach(function(e){return E+=","+e.key});var y="Leikstj\xf3ri: ".concat(v[0].name);if(v.length>1){y="Leikstj\xf3rar: "+v[0].name;for(var O=1;O<v.length;O++)O===v.length-1?y+=" og ".concat(v[O].name):y+=", ".concat(v[O].name)}return r.a.createElement("div",{className:"movie-page"},r.a.createElement(b.a,{title:o}),r.a.createElement("div",{className:"movie-about"},r.a.createElement("img",{src:u,alt:"mynd fyrir b\xed\xf3myndina "+o}),r.a.createElement("div",{className:"movie-info"},r.a.createElement("h1",{className:"movie-title"},o),r.a.createElement("div",{className:"movie-page-rating"},r.a.createElement("p",null,f),r.a.createElement("a",{href:"https://www.imdb.com/title/tt"+m.imdb},r.a.createElement("img",{className:"logo",src:"".concat("/biomyndir","/imdb.png"),alt:"imdb logo"}))),r.a.createElement("p",null,y),r.a.createElement("p",{className:"plot-text"},p))),g.length>0&&r.a.createElement("div",{className:"youtubevideowrap"},r.a.createElement("div",{className:"video-container"},r.a.createElement("iframe",{title:"trailers",width:"640",height:"352",align:"center",src:"https://www.youtube.com/embed/?playlist=".concat(E),frameBorder:"0",allow:"autoplay; encrypted-media",allowFullScreen:!0}))),r.a.createElement("div",{className:"showtimes"},i&&h.map(function(e){var t=e.cinema,n=t.name,a=t.id,s=e.schedule;return r.a.createElement("section",{key:a,className:"theater-showtimes"},r.a.createElement("h1",null,n),r.a.createElement("div",{className:"schedules"},s.map(function(e,t){return r.a.createElement("a",{key:"".concat(a).concat(t),href:e.purchase_url},r.a.createElement(H,{className:"schedule"},r.a.createElement("p",null,e.time)))})))})))}}]),t}(a.Component)),q=Object(y.a)(Object(l.b)(function(e){return{movies:e.movies.movies,isFetching:e.movies.isFetching}})($)),X=(n(62),function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("main",{className:"main"},r.a.createElement(b.a,{defaultTitle:"B\xed\xf3myndir landsins",titleTemplate:"%s"}),r.a.createElement(j,null),r.a.createElement("div",{className:"main__content"},r.a.createElement(g.a,{location:this.props.location},r.a.createElement(E.a,{path:"/",exact:!0,component:Y}),r.a.createElement(E.a,{path:"/movie/:id",component:q}),r.a.createElement(E.a,{component:w}))),r.a.createElement("hr",null),r.a.createElement("footer",{className:"footer"},r.a.createElement("p",null,"\xa9 ",(new Date).getFullYear()," - B\xed\xf3myndir landsins")))}}]),t}(a.Component)),Z=Object(y.a)(Object(l.b)(function(e){return{movies:e.movies.movies,isFetching:e.movies.isFetching}})(X)),ee=n(20),te={isFetching:!1,movies:null},ne=Object(o.c)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(ee.a)({},e,{isFetching:t.isFetching,movies:t.movies});case U:return Object(ee.a)({},e,{isFetching:t.isFetching,movies:t.movies,message:t.message});case A:return Object(ee.a)({},e,{isFetching:t.isFetching,movies:t.movies});default:return e}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae=Object(o.d)(ne,Object(o.a)(u.a));i.a.render(r.a.createElement(l.a,{store:ae},r.a.createElement(c.a,{basename:"/biomyndir"},r.a.createElement(Z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,2,1]]]);
//# sourceMappingURL=main.48d3d8d6.chunk.js.map